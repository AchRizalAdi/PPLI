{"remainingRequest":"E:\\Codeee\\PPLI FE BE\\PPLI\\node_modules\\babel-loader\\lib\\index.js!E:\\Codeee\\PPLI FE BE\\PPLI\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\Codeee\\PPLI FE BE\\PPLI\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!E:\\Codeee\\PPLI FE BE\\PPLI\\src\\App.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\Codeee\\PPLI FE BE\\PPLI\\src\\App.vue","mtime":1658501745971},{"path":"E:\\Codeee\\PPLI FE BE\\PPLI\\babel.config.js","mtime":1657682266000},{"path":"E:\\Codeee\\PPLI FE BE\\PPLI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657682274000},{"path":"E:\\Codeee\\PPLI FE BE\\PPLI\\node_modules\\babel-loader\\lib\\index.js","mtime":1657682274000},{"path":"E:\\Codeee\\PPLI FE BE\\PPLI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657682274000},{"path":"E:\\Codeee\\PPLI FE BE\\PPLI\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1657682290000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwpyb3V0ZXIuYmVmb3JlRWFjaCgodG8sIGZyb20sIG5leHQpID0+IHsKICBpZiAodG8ubWF0Y2hlZC5zb21lKHJlY29yZCA9PiByZWNvcmQubWV0YS5yZXF1aXJlc0F1dGgpKSB7CiAgICBsZXQgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSAhPSBudWxsOwoKICAgIGlmICghdG9rZW4pIHsKICAgICAgbmV4dCh7CiAgICAgICAgcGF0aDogJy9sb2dpbicsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIHJlZGlyZWN0OiB0by5mdWxsUGF0aAogICAgICAgIH0KICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBsZXQgdXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSk7CiAgICAgIGxldCByb2xlcyA9IHVzZXIucm9sZXMubWFwKHJvbGUgPT4gcm9sZS5uYW1lKTsKICAgICAgY29uc29sZS5sb2cocm9sZXNbMF0pOwoKICAgICAgaWYgKHRvLm1hdGNoZWQuc29tZShyZWNvcmQgPT4gcmVjb3JkLm1ldGEuaXNVc2VyKSkgewogICAgICAgIGlmIChyb2xlcy5pbmNsdWRlcygndXNlcicpKSBuZXh0KCk7ZWxzZSBpZiAocm9sZXNbMF0gPT09ICdhZG1pbicpIHsKICAgICAgICAgIG5leHQoewogICAgICAgICAgICBuYW1lOiAnYWRtaW4nCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKHJvbGVzWzBdID09PSAnbWFuYWdlcicpIHsKICAgICAgICAgIG5leHQoewogICAgICAgICAgICBuYW1lOiAnbWFuYWdlcicKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBuZXh0KHsKICAgICAgICAgIG5hbWU6ICdob21lJwogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHRvLm1hdGNoZWQuc29tZShyZWNvcmQgPT4gcmVjb3JkLm1ldGEuaXNBZG1pbikpIHsKICAgICAgICBpZiAocm9sZXMuaW5jbHVkZXMoJ2FkbWluJykpIG5leHQoKTtlbHNlIGlmIChyb2xlc1swXSA9PT0gJ21hbmFnZXInKSB7CiAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgbmFtZTogJ21hbmFnZXInCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKHJvbGVzWzBdID09PSAndXNlcicpIHsKICAgICAgICAgIG5leHQoewogICAgICAgICAgICBuYW1lOiAndXNlcicKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBuZXh0KHsKICAgICAgICAgIG5hbWU6ICdob21lJwogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHRvLm1hdGNoZWQuc29tZShyZWNvcmQgPT4gcmVjb3JkLm1ldGEuaXNNYW5hZ2VyKSkgewogICAgICAgIGlmIChyb2xlcy5pbmNsdWRlcygnbWFuYWdlcicpKSBuZXh0KCk7ZWxzZSBpZiAocm9sZXNbMF0gPT09ICd1c2VyJykgewogICAgICAgICAgbmV4dCh7CiAgICAgICAgICAgIG5hbWU6ICd1c2VyJwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChyb2xlc1swXSA9PT0gJ2FkbWluJykgewogICAgICAgICAgbmV4dCh7CiAgICAgICAgICAgIG5hbWU6ICdhZG1pbicKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBuZXh0KHsKICAgICAgICAgIG5hbWU6ICdob21lJwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIG5leHQoKTsKICAgICAgfQogICAgfQogIH0gZWxzZSB7CiAgICBuZXh0KCk7CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBcHAnCn07"},{"version":3,"mappings":"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","names":["router","beforeEach","to","from","next","matched","some","record","meta","requiresAuth","token","localStorage","getItem","path","query","redirect","fullPath","user","JSON","parse","roles","map","role","name","console","log","isUser","includes","isAdmin","isManager"],"sourceRoot":"","sources":["E:\\Codeee\\PPLI FE BE\\PPLI\\src\\App.vue"],"sourcesContent":["<template>\r\n  <router-view :key=\"$route.path\"/>\r\n</template>\r\n\r\n<script>\r\nrouter.beforeEach((to, from, next) => {\r\n  if (to.matched.some(record => record.meta.requiresAuth)) {\r\n    let token = localStorage.getItem('token') != null;\r\n    if (!token) {\r\n      next({\r\n        path: '/login',\r\n        query: {\r\n          redirect: to.fullPath\r\n        }\r\n      })\r\n    } else {\r\n      let user = JSON.parse(localStorage.getItem('user'))\r\n      let roles = user.roles.map(role => role.name)\r\n      console.log(roles[0]);\r\n      if (to.matched.some(record => record.meta.isUser)) {\r\n        if (roles.includes('user')) next()\r\n        else if (roles[0] === 'admin') {\r\n          next({\r\n            name: 'admin'\r\n          })\r\n        } else if (roles[0] === 'manager') {\r\n          next({\r\n            name: 'manager'\r\n          })\r\n        } else next({\r\n          name: 'home'\r\n        })\r\n      } else if (to.matched.some(record => record.meta.isAdmin)) {\r\n        if (roles.includes('admin')) next()\r\n        else if (roles[0] === 'manager') {\r\n          next({\r\n            name: 'manager'\r\n          })\r\n        } else if (roles[0] === 'user') {\r\n          next({\r\n            name: 'user'\r\n          })\r\n        } else next({\r\n          name: 'home'\r\n        })\r\n\r\n      } else if (to.matched.some(record => record.meta.isManager)) {\r\n        if (roles.includes('manager')) next()\r\n        else if (roles[0] === 'user') {\r\n          next({\r\n            name: 'user'\r\n          })\r\n        } else if (roles[0] === 'admin') {\r\n          next({\r\n            name: 'admin'\r\n          })\r\n        } else next({\r\n          name: 'home'\r\n        })\r\n\r\n      } else {\r\n        next()\r\n      }\r\n    }\r\n  } else {\r\n    next()\r\n  }\r\n})\r\nexport default {\r\n  name: 'App',\r\n}\r\n</script>\r\n"]}]}