{"remainingRequest":"E:\\Codeee\\PPLI FE BE\\PPLI\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!E:\\Codeee\\PPLI FE BE\\PPLI\\src\\App.vue?vue&type=template&id=7ba5bd90","dependencies":[{"path":"E:\\Codeee\\PPLI FE BE\\PPLI\\src\\App.vue","mtime":1658501745971},{"path":"E:\\Codeee\\PPLI FE BE\\PPLI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657682274000},{"path":"E:\\Codeee\\PPLI FE BE\\PPLI\\node_modules\\babel-loader\\lib\\index.js","mtime":1657682274000},{"path":"E:\\Codeee\\PPLI FE BE\\PPLI\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1657682290000},{"path":"E:\\Codeee\\PPLI FE BE\\PPLI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657682274000},{"path":"E:\\Codeee\\PPLI FE BE\\PPLI\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1657682290000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIDxyb3V0ZXItdmlldyA6a2V5PSIkcm91dGUucGF0aCIvPg0K"},{"version":3,"sources":["E:\\Codeee\\PPLI FE BE\\PPLI\\src\\App.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC","file":"E:/Codeee/PPLI FE BE/PPLI/src/App.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <router-view :key=\"$route.path\"/>\r\n</template>\r\n\r\n<script>\r\nrouter.beforeEach((to, from, next) => {\r\n  if (to.matched.some(record => record.meta.requiresAuth)) {\r\n    let token = localStorage.getItem('token') != null;\r\n    if (!token) {\r\n      next({\r\n        path: '/login',\r\n        query: {\r\n          redirect: to.fullPath\r\n        }\r\n      })\r\n    } else {\r\n      let user = JSON.parse(localStorage.getItem('user'))\r\n      let roles = user.roles.map(role => role.name)\r\n      console.log(roles[0]);\r\n      if (to.matched.some(record => record.meta.isUser)) {\r\n        if (roles.includes('user')) next()\r\n        else if (roles[0] === 'admin') {\r\n          next({\r\n            name: 'admin'\r\n          })\r\n        } else if (roles[0] === 'manager') {\r\n          next({\r\n            name: 'manager'\r\n          })\r\n        } else next({\r\n          name: 'home'\r\n        })\r\n      } else if (to.matched.some(record => record.meta.isAdmin)) {\r\n        if (roles.includes('admin')) next()\r\n        else if (roles[0] === 'manager') {\r\n          next({\r\n            name: 'manager'\r\n          })\r\n        } else if (roles[0] === 'user') {\r\n          next({\r\n            name: 'user'\r\n          })\r\n        } else next({\r\n          name: 'home'\r\n        })\r\n\r\n      } else if (to.matched.some(record => record.meta.isManager)) {\r\n        if (roles.includes('manager')) next()\r\n        else if (roles[0] === 'user') {\r\n          next({\r\n            name: 'user'\r\n          })\r\n        } else if (roles[0] === 'admin') {\r\n          next({\r\n            name: 'admin'\r\n          })\r\n        } else next({\r\n          name: 'home'\r\n        })\r\n\r\n      } else {\r\n        next()\r\n      }\r\n    }\r\n  } else {\r\n    next()\r\n  }\r\n})\r\nexport default {\r\n  name: 'App',\r\n}\r\n</script>\r\n"]}]}